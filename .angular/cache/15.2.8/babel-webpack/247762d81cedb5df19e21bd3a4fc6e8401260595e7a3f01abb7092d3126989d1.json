{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"C:/Users/mauri/Downloads/ProyectoFinal-main/node_modules/@babel/runtime/regenerator/index.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.Accessibility = void 0;\nvar _common = require(\"./common\");\nvar _menuInterface = require(\"./menu-interface\");\nvar _storage = require(\"./storage\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar Accessibility = /*#__PURE__*/function () {\n  // SpeechRecognition;\n  function Accessibility() {\n    var _this = this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Accessibility);\n    _defineProperty(this, \"_isReading\", void 0);\n    _defineProperty(this, \"_common\", void 0);\n    _defineProperty(this, \"_storage\", void 0);\n    _defineProperty(this, \"_options\", void 0);\n    _defineProperty(this, \"_sessionState\", void 0);\n    _defineProperty(this, \"_htmlInitFS\", void 0);\n    _defineProperty(this, \"_body\", void 0);\n    _defineProperty(this, \"_html\", void 0);\n    _defineProperty(this, \"_icon\", void 0);\n    _defineProperty(this, \"_menu\", void 0);\n    _defineProperty(this, \"_htmlOrgFontSize\", void 0);\n    _defineProperty(this, \"_stateValues\", void 0);\n    _defineProperty(this, \"_recognition\", void 0);\n    _defineProperty(this, \"_speechToTextTarget\", void 0);\n    _defineProperty(this, \"menuInterface\", void 0);\n    _defineProperty(this, \"options\", void 0);\n    this._common = new _common.Common();\n    this._storage = new _storage.Storage();\n    this._options = this.defaultOptions;\n    options = this.deleteOppositesIfDefined(options);\n    this.options = this._common.extend(this._options, options); // Consider adding this:\n    // if (options) {\n    //     if (!options.textToSpeechLang && document.querySelector('html').getAttribute('lang')) {\n    //         this.options.textToSpeechLang = document.querySelector('html').getAttribute('lang')\n    //     }\n    // }\n\n    this.disabledUnsupportedFeatures();\n    this._sessionState = {\n      textSize: 0,\n      textSpace: 0,\n      lineHeight: 0,\n      invertColors: false,\n      grayHues: false,\n      underlineLinks: false,\n      bigCursor: false,\n      readingGuide: false\n    };\n    if (this.options.icon.useEmojis) {\n      this.fontFallback();\n      this.build();\n    } else {\n      this._common.injectIconsFont(this.options.icon.fontFaceSrc, function (hasError) {\n        _this.build();\n        if (!_this.options.icon.forceFont) {\n          setTimeout(function () {\n            _this._common.isFontLoaded(_this.options.icon.fontFamily, function (isLoaded) {\n              if (!isLoaded || hasError) {\n                _this._common.warn(\"\".concat(_this.options.icon.fontFamily, \" font was not loaded, using emojis instead\"));\n                _this.fontFallback();\n                _this.destroy();\n                _this.build();\n              }\n            });\n          });\n        }\n      });\n    }\n    if (this.options.modules.speechToText) {\n      window.addEventListener('beforeunload', function () {\n        if (_this._isReading) {\n          window.speechSynthesis.cancel();\n          _this._isReading = false;\n        }\n      });\n    }\n  }\n  _createClass(Accessibility, [{\n    key: \"stateValues\",\n    get: function get() {\n      return this._stateValues;\n    },\n    set: function set(value) {\n      this._stateValues = value;\n    }\n  }, {\n    key: \"html\",\n    get: function get() {\n      return this._html;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      return this._body;\n    }\n  }, {\n    key: \"sessionState\",\n    get: function get() {\n      return this._sessionState;\n    },\n    set: function set(value) {\n      this._sessionState = value;\n    }\n  }, {\n    key: \"common\",\n    get: function get() {\n      return this._common;\n    }\n  }, {\n    key: \"recognition\",\n    get: function get() {\n      return this._recognition;\n    }\n  }, {\n    key: \"isReading\",\n    get: function get() {\n      return this._isReading;\n    },\n    set: function set(value) {\n      this._isReading = value;\n    } // Default options\n  }, {\n    key: \"defaultOptions\",\n    get: function get() {\n      return {\n        icon: {\n          position: {\n            bottom: {\n              size: 50,\n              units: 'px'\n            },\n            right: {\n              size: 10,\n              units: 'px'\n            },\n            type: 'fixed'\n          },\n          dimensions: {\n            width: {\n              size: 50,\n              units: 'px'\n            },\n            height: {\n              size: 50,\n              units: 'px'\n            }\n          },\n          zIndex: '9999',\n          backgroundColor: '#4054b2',\n          color: '#fff',\n          img: 'accessibility',\n          circular: false,\n          circularBorder: false,\n          fontFaceSrc: ['https://fonts.googleapis.com/icon?family=Material+Icons'],\n          fontFamily: this._common.getFixedFont('Material Icons'),\n          fontClass: 'material-icons',\n          useEmojis: false\n        },\n        hotkeys: {\n          enabled: false,\n          helpTitles: true,\n          keys: {\n            toggleMenu: ['ctrlKey', 'altKey', 65],\n            invertColors: ['ctrlKey', 'altKey', 73],\n            grayHues: ['ctrlKey', 'altKey', 71],\n            underlineLinks: ['ctrlKey', 'altKey', 85],\n            bigCursor: ['ctrlKey', 'altKey', 67],\n            readingGuide: ['ctrlKey', 'altKey', 82],\n            textToSpeech: ['ctrlKey', 'altKey', 84],\n            speechToText: ['ctrlKey', 'altKey', 83],\n            disableAnimations: ['ctrlKey', 'altKey', 81]\n          }\n        },\n        buttons: {\n          font: {\n            size: 18,\n            units: 'px'\n          }\n        },\n        guide: {\n          cBorder: '#20ff69',\n          cBackground: '#000000',\n          height: '12px'\n        },\n        menu: {\n          dimensions: {\n            width: {\n              size: 25,\n              units: 'vw'\n            },\n            height: {\n              size: 'auto',\n              units: ''\n            }\n          },\n          fontFamily: 'RobotoDraft, Roboto, sans-serif, Arial'\n        },\n        labels: {\n          resetTitle: 'Reset',\n          closeTitle: 'Close',\n          menuTitle: 'Accessibility Options',\n          increaseText: 'increase text size',\n          decreaseText: 'decrease text size',\n          increaseTextSpacing: 'increase text spacing',\n          decreaseTextSpacing: 'decrease text spacing',\n          invertColors: 'invert colors',\n          grayHues: 'gray hues',\n          bigCursor: 'big cursor',\n          readingGuide: 'reading guide',\n          underlineLinks: 'underline links',\n          textToSpeech: 'text to speech',\n          speechToText: 'speech to text',\n          disableAnimations: 'disable animations',\n          increaseLineHeight: 'increase line height',\n          decreaseLineHeight: 'decrease line height',\n          screenReader: 'screen reader'\n        },\n        textPixelMode: false,\n        textEmlMode: true,\n        animations: {\n          buttons: true\n        },\n        modules: {\n          increaseText: true,\n          decreaseText: true,\n          increaseTextSpacing: true,\n          decreaseTextSpacing: true,\n          invertColors: true,\n          grayHues: true,\n          bigCursor: true,\n          readingGuide: true,\n          underlineLinks: true,\n          textToSpeech: true,\n          speechToText: true,\n          disableAnimations: true\n        },\n        session: {\n          persistent: true\n        },\n        iframeModals: [],\n        customFunctions: [],\n        statement: {\n          url: ''\n        },\n        feedback: {\n          url: ''\n        },\n        language: {\n          textToSpeechLang: '',\n          speechToTextLang: ''\n        }\n      };\n    }\n  }, {\n    key: \"initFontSize\",\n    value: function initFontSize() {\n      // store this values only once.\n      if (!this._htmlInitFS) {\n        var htmlInitFS = this._common.getFormattedDim(getComputedStyle(this._html).fontSize);\n        var bodyInitFS = this._common.getFormattedDim(getComputedStyle(this._body).fontSize);\n        this._html.style.fontSize = htmlInitFS.size / 16 * 100 + '%';\n        this._htmlOrgFontSize = this._html.style.fontSize;\n        this._body.style.fontSize = bodyInitFS.size / htmlInitFS.size + 'em';\n      }\n    }\n  }, {\n    key: \"fontFallback\",\n    value: function fontFallback() {\n      this.options.icon.useEmojis = true;\n      this.options.icon.fontFamily = null;\n      this.options.icon.img = '♿';\n      this.options.icon.fontClass = '';\n    }\n  }, {\n    key: \"deleteOppositesIfDefined\",\n    value: function deleteOppositesIfDefined(options) {\n      if (options.icon && options.icon.position) {\n        if (options.icon.position.left) {\n          delete this._options.icon.position.right;\n          this._options.icon.position.left = options.icon.position.left;\n        }\n        if (options.icon.position.top) {\n          delete this._options.icon.position.bottom;\n          this._options.icon.position.top = options.icon.position.top;\n        }\n      }\n      return options;\n    }\n  }, {\n    key: \"disabledUnsupportedFeatures\",\n    value: function disabledUnsupportedFeatures() {\n      if (!('webkitSpeechRecognition' in window) || location.protocol !== 'https:') {\n        this._common.warn('speech to text isn\\'t supported in this browser or in http protocol (https required)');\n        this.options.modules.speechToText = false;\n      }\n      var windowAny = window;\n      if (!windowAny.SpeechSynthesisUtterance || !windowAny.speechSynthesis) {\n        this._common.warn('text to speech isn\\'t supported in this browser');\n        this.options.modules.textToSpeech = false;\n      }\n    }\n  }, {\n    key: \"injectCss\",\n    value: function injectCss() {\n      var css = \"\\n        ._access-scrollbar::-webkit-scrollbar-track, .mat-autocomplete-panel::-webkit-scrollbar-track, .mat-tab-body-content::-webkit-scrollbar-track, .mat-select-panel:not([class*='mat-elevation-z'])::-webkit-scrollbar-track, .mat-menu-panel::-webkit-scrollbar-track {\\n            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\\n            background-color: #F5F5F5;\\n        }\\n        ._access-scrollbar::-webkit-scrollbar, .mat-autocomplete-panel::-webkit-scrollbar, .mat-tab-body-content::-webkit-scrollbar, .mat-select-panel:not([class*='mat-elevation-z'])::-webkit-scrollbar, .mat-menu-panel::-webkit-scrollbar {\\n            width: 6px;\\n            background-color: #F5F5F5;\\n        }\\n        ._access-scrollbar::-webkit-scrollbar-thumb, .mat-autocomplete-panel::-webkit-scrollbar-thumb, .mat-tab-body-content::-webkit-scrollbar-thumb, .mat-select-panel:not([class*='mat-elevation-z'])::-webkit-scrollbar-thumb, .mat-menu-panel::-webkit-scrollbar-thumb {\\n            background-color: #999999;\\n        }\\n        ._access-icon {\\n            position: \".concat(this.options.icon.position.type, \";\\n            background-repeat: no-repeat;\\n            background-size: contain;\\n            cursor: pointer;\\n            opacity: 0;\\n            transition-duration: .35s;\\n            -moz-user-select: none;\\n            -webkit-user-select: none;\\n            -ms-user-select: none;\\n            user-select: none;\\n            \").concat(!this.options.icon.useEmojis ? 'box-shadow: 1px 1px 5px rgba(0,0,0,.5);' : '', \"\\n            transform: \").concat(!this.options.icon.useEmojis ? 'scale(1)' : 'skewX(14deg)', \";\\n        }\\n        ._access-icon:hover {\\n            \") + (this.options.animations.buttons && !this.options.icon.useEmojis ? \"\\n            box-shadow: 1px 1px 10px rgba(0,0,0,.9);\\n            transform: scale(1.1);\\n            \" : '') + \"\\n        }\\n        .circular._access-icon {\\n            border-radius: 50%;\\n            border: .5px solid white;\\n        }\\n        \" + (this.options.animations.buttons && this.options.icon.circularBorder ? \"\\n        .circular._access-icon:hover {\\n            border: 5px solid white;\\n            border-style: double;\\n            font-size: 35px!important;\\n            vertical-align: middle;\\n            padding-top: 2px;\\n            text-align: center;\\n        }\\n        \" : '') + \"\\n        .access_read_guide_bar{\\n            box-sizing: border-box;\\n            background: \".concat(this.options.guide.cBackground, \";\\n            width: 100%!important;\\n            min-width: 100%!important;\\n            position: fixed!important;\\n            height: \").concat(this.options.guide.height, \" !important;\\n            border: solid 3px \").concat(this.options.guide.cBorder, \";\\n            border-radius: 5px;\\n            top: 15px;\\n            z-index: 2147483647;\\n        }\\n        .access-high-contrast *{\\n            background-color: #000 !important;\\n            background-image: none !important;\\n            border-color: #fff !important;\\n            -webkit-box-shadow: none !important;\\n            box-shadow: none !important;\\n            color: #fff !important;\\n            text-indent: 0 !important;\\n            text-shadow: none !important;\\n        }\\n        ._access-menu {\\n            -moz-user-select: none;\\n            -webkit-user-select: none;\\n            -ms-user-select: none;\\n            user-select: none;\\n            position: fixed;\\n            width: \").concat(this.options.menu.dimensions.width.size + this.options.menu.dimensions.width.units, \";\\n            height: \").concat(this.options.menu.dimensions.height.size + this.options.menu.dimensions.height.units, \";\\n            transition-duration: .35s;\\n            z-index: \").concat(this.options.icon.zIndex + 1, \";\\n            opacity: 1;\\n            background-color: #fff;\\n            color: #000;\\n            border-radius: 3px;\\n            border: solid 1px #f1f0f1;\\n            font-family: \").concat(this.options.menu.fontFamily, \";\\n            min-width: 300px;\\n            box-shadow: 0px 0px 1px #aaa;\\n            max-height: calc(100vh - 80px);\\n            \").concat(getComputedStyle(this._body).direction === 'rtl' ? 'text-indent: -5px' : '', \"\\n        }\\n        ._access-menu.close {\\n            z-index: -1;\\n            width: 0;\\n            opacity: 0;\\n            background-color: transparent;\\n        }\\n        ._access-menu.bottom {\\n            bottom: 0;\\n        }\\n        ._access-menu.top {\\n            top: 0;\\n        }\\n        ._access-menu.left {\\n            left: 0;\\n        }\\n        ._access-menu.close.left {\\n            left: -\").concat(this.options.menu.dimensions.width.size + this.options.menu.dimensions.width.units, \";\\n        }\\n        ._access-menu.right {\\n            right: 0;\\n        }\\n        ._access-menu.close.right {\\n            right: -\").concat(this.options.menu.dimensions.width.size + this.options.menu.dimensions.width.units, \";\\n        }\\n        ._access-menu ._text-center {\\n            font-size: 22px !important;\\n            font-weight: bold;\\n            margin-top: 20px;\\n            margin-bottom: 10px;\\n            padding: 0;\\n            color: rgba(0,0,0,.87);\\n            letter-spacing: initial!important;\\n            word-spacing: initial!important;\\n            text-align: center;\\n        }\\n        ._access-menu ._menu-close-btn {\\n            left: 5px;\\n            color: #d63c3c;\\n            transition: .3s ease;\\n            transform: rotate(0deg);\\n            font-style: normal !important;\\n        }\\n        ._access-menu ._menu-reset-btn:hover,._access-menu ._menu-close-btn:hover {\\n            \").concat(this.options.animations.buttons ? 'transform: rotate(180deg);' : '', \"\\n        }\\n        ._access-menu ._menu-reset-btn {\\n            right: 5px;\\n            color: #4054b2;\\n            transition: .3s ease;\\n            transform: rotate(0deg);\\n            font-style: normal !important;\\n        }\\n        ._access-menu ._menu-btn {\\n            position: absolute;\\n            top: 5px;\\n            cursor: pointer;\\n            font-size: 24px !important;\\n            font-weight: bold;\\n            background: transparent;\\n            border: none;\\n        }\\n        ._access-menu ul {\\n            padding: 0;\\n            position: relative;\\n            font-size: 18px !important;\\n            margin: 0;\\n            overflow: auto;\\n            max-height: calc(100vh - 77px);\\n        }\\n        html._access_cursor * {\\n            cursor: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyOS4xODhweCIgaGVpZ2h0PSI0My42MjVweCIgdmlld0JveD0iMCAwIDI5LjE4OCA0My42MjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI5LjE4OCA0My42MjUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0Q5REFEOSIgc3Ryb2tlLXdpZHRoPSIxLjE0MDYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyLjgsNC41NDkgMjYuODQ3LDE5LjkwMiAxNi45NjQsMjIuNzAxIDI0LjIzOSwzNy43NDkgMTguMjc4LDQyLjAxNyA5Ljc0MSwzMC43MjQgMS4xMzgsMzUuODA5ICIvPjxnPjxnPjxnPjxwYXRoIGZpbGw9IiMyMTI2MjciIGQ9Ik0yOS4xNzUsMjEuMTU1YzAuMDcxLTAuNjEzLTAuMTY1LTEuMjUzLTAuNjM1LTEuNTczTDIuMTY1LDAuMjU4Yy0wLjQyNC0wLjMyLTAuOTg4LTAuMzQ2LTEuNDM1LTAuMDUzQzAuMjgyLDAuNDk3LDAsMS4wMywwLDEuNjE3djM0LjE3MWMwLDAuNjEzLDAuMzA2LDEuMTQ2LDAuNzc2LDEuNDM5YzAuNDcxLDAuMjY3LDEuMDU5LDAuMjEzLDEuNDgyLTAuMTZsNy40ODItNi4zNDRsNi44NDcsMTIuMTU1YzAuMjU5LDAuNDgsMC43MjksMC43NDYsMS4yLDAuNzQ2YzAuMjM1LDAsMC40OTQtMC4wOCwwLjcwNi0wLjIxM2w2Ljk4OC00LjU4NWMwLjMyOS0wLjIxMywwLjU2NS0wLjU4NiwwLjY1OS0xLjAxM2MwLjA5NC0wLjQyNiwwLjAyNC0wLjg4LTAuMTg4LTEuMjI2bC02LjM3Ni0xMS4zODJsOC42MTEtMi43NDVDMjguNzA1LDIyLjI3NCwyOS4xMDUsMjEuNzY4LDI5LjE3NSwyMS4xNTV6IE0xNi45NjQsMjIuNzAxYy0wLjQyNCwwLjEzMy0wLjc3NiwwLjUwNi0wLjk0MSwwLjk2Yy0wLjE2NSwwLjQ4LTAuMTE4LDEuMDEzLDAuMTE4LDEuNDM5bDYuNTg4LDExLjc4MWwtNC41NDEsMi45ODVsLTYuODk0LTEyLjMxNWMtMC4yMTItMC4zNzMtMC41NDEtMC42NC0wLjk0MS0wLjcyYy0wLjA5NC0wLjAyNy0wLjE2NS0wLjAyNy0wLjI1OS0wLjAyN2MtMC4zMDYsMC0wLjU4OCwwLjEwNy0wLjg0NywwLjMyTDIuOCwzMi41OVY0LjU0OWwyMS41OTksMTUuODA2TDE2Ljk2NCwyMi43MDF6Ii8+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==),auto!important;\\n        }\\n        .texting {\\n            height:50px;\\n            text-align: center;\\n            border: solid 2.4px #f1f0f1;\\n            border-radius: 4px;\\n            width: 100%;\\n            display: inline-block;\\n        }\\n        .screen-reader-wrapper {\\n            margin-top: 13px;\\n            margin-left: 10px;\\n            margin-right: 10px;\\n        }\\n        .screen-reader-wrapper-step-1 {\\n            float: left;\\n            background: white;\\n            width: 33%;\\n            height: 3px;\\n            border-radius: 10px;\\n        }\\n        .screen-reader-wrapper-step-2 {\\n            float: left;\\n            background: white;\\n            width: 33%;\\n            height: 3px;\\n            border-radius: 10px;\\n        }\\n        .screen-reader-wrapper-step-3 {\\n            float: left;\\n            background: white;\\n            width: 33%;\\n            height: 3px;\\n            border-radius: 10px;\\n        }\\n        ._access-menu ul li {\\n            list-style-type: none;\\n            -ms-user-select: none;\\n            -moz-user-select: none;\\n            -webkit-user-select: none;\\n            user-select: none;\\n            margin: 5px;\\n            font-size: \").concat(this.options.buttons.font.size + this.options.buttons.font.units, \" !important;\\n            line-height: \").concat(this.options.buttons.font.size + this.options.buttons.font.units, \" !important;\\n            color: rgba(0,0,0,.6);\\n            letter-spacing: initial!important;\\n            word-spacing: initial!important;\\n        }\\n        ._access-menu ul li button {\\n            background: #f9f9f9;\\n            padding: 10px 0;\\n            width: 100%;\\n            text-indent: 35px;\\n            text-align: start;\\n            position: relative;\\n            transition-duration: .35s;\\n            transition-timing-function: ease-in-out;\\n            border: solid 1px #f1f0f1;\\n            border-radius: 4px;\\n            cursor: pointer;\\n        }\\n        ._access-menu ul li.position {\\n            display: inline-block;\\n            width: auto;\\n        }\\n        ._access-menu ul.before-collapse li button {\\n            opacity: 0.05;\\n        }\\n        ._access-menu ul li button.active, ._access-menu ul li button.active:hover {\\n            background-color: #000;\\n        }\\n        ._access-menu div.active {\\n            color: #fff;\\n            background-color: #000;\\n        }\\n        ._access-menu ul li button.active, ._access-menu ul li button.active:hover, ._access-menu ul li button.active:before, ._access-menu ul li button.active:hover:before {\\n            color: #fff;\\n        }\\n        ._access-menu ul li button:hover {\\n            color: rgba(0,0,0,.8);\\n            background-color: #eaeaea;\\n        }\\n        ._access-menu ul li.not-supported {\\n            display: none;\\n        }\\n        ._access-menu ul li button:before {\\n            content: ' ';\\n            \").concat(!this.options.icon.useEmojis ? 'font-family: ' + this._common.getFixedPseudoFont(this.options.icon.fontFamily) + ';' : '', \"\\n            text-rendering: optimizeLegibility;\\n            font-feature-settings: \\\"liga\\\" 1;\\n            font-style: normal;\\n            text-transform: none;\\n            line-height: \").concat(!this.options.icon.useEmojis ? '1' : '1.1', \";\\n            font-size: \").concat(!this.options.icon.useEmojis ? '24px' : '20px', \" !important;\\n            width: 30px;\\n            height: 30px;\\n            display: inline-block;\\n            overflow: hidden;\\n            -webkit-font-smoothing: antialiased;\\n            top: 7px;\\n            left: 5px;\\n            position: absolute;\\n            color: rgba(0,0,0,.6);\\n            direction: ltr;\\n            text-indent: 0;\\n            transition-duration: .35s;\\n            transition-timing-function: ease-in-out;\\n        }\\n        @keyframes _access-dialog-backdrop {\\n            0% {\\n                background: rgba(0, 0, 0, 0.1);\\n            }\\n            100% {\\n                background: rgba(0, 0, 0, 0.5);\\n            }\\n        }\\n        dialog._access::backdrop, dialog._access {\\n            transition-duration: 0.35s;\\n            transition-timing-function: ease-in-out;\\n        }\\n        dialog._access:modal {\\n            border-color: transparent;\\n            border-width: 0;\\n            padding: 0;\\n        }\\n        dialog._access[open]::backdrop {\\n            background: rgba(0, 0, 0, 0.5);\\n            animation: _access-dialog-backdrop 0.35s ease-in-out;\\n        }\\n        dialog._access.closing[open]::backdrop {\\n            background: rgba(0, 0, 0, 0.1);\\n        }\\n        dialog._access.closing[open] {\\n            opacity: 0;\\n        }\\n        ._access-menu ul li button svg path {\\n            fill: rgba(0,0,0,.6);\\n            transition-duration: .35s;\\n            transition-timing-function: ease-in-out;\\n        }\\n        ._access-menu ul li button:hover svg path {\\n            fill: rgba(0,0,0,.8);\\n        }\\n        ._access-menu ul li button.active svg path {\\n            fill: #fff;\\n        }\\n        ._access-menu ul li:hover button:before {\\n            color: rgba(0,0,0,.8);\\n        }\\n        ._access-menu ul li button.active button:before {\\n            color: #fff;\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"increaseText\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"zoom_in\"' : '\"🔼\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"decreaseText\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"zoom_out\"' : '\"🔽\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"increaseTextSpacing\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"unfold_more\"' : '\"🔼\"', \";\\n            transform: rotate(90deg) translate(-7px, 2px);\\n            top: 14px;\\n            left: 0;\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"decreaseTextSpacing\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"unfold_less\"' : '\"🔽\"', \";\\n            transform: rotate(90deg) translate(-7px, 2px);\\n            top: 14px;\\n            left: 0;\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"invertColors\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"invert_colors\"' : '\"🎆\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"grayHues\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"format_color_reset\"' : '\"🌫️\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"underlineLinks\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"format_underlined\"' : '\"🔗\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"bigCursor\\\"]:before {\\n            /*content: 'touch_app';*/\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"readingGuide\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"border_horizontal\"' : '\"↔️\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"textToSpeech\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"record_voice_over\"' : '\"⏺️\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"speechToText\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"mic\"' : '\"🎤\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"disableAnimations\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"animation\"' : '\"🏃‍♂️\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"iframeModals\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"policy\"' : '\"⚖️\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"customFunctions\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"psychology_alt\"' : '\"❓\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"increaseLineHeight\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"unfold_more\"' : '\"🔼\"', \";\\n        }\\n        ._access-menu ul li button[data-access-action=\\\"decreaseLineHeight\\\"]:before {\\n            content: \").concat(!this.options.icon.useEmojis ? '\"unfold_less\"' : '\"🔽\"', \";\\n        }\");\n      var className = '_access-main-css';\n      this._common.injectStyle(css, {\n        className: className\n      });\n      this._common.deployedObjects.set('.' + className, false);\n    }\n  }, {\n    key: \"injectIcon\",\n    value: function injectIcon() {\n      var fontSize = this.options.icon.dimensions.width.size * 0.8;\n      var lineHeight = this.options.icon.dimensions.width.size * 0.9;\n      var textIndent = this.options.icon.dimensions.width.size * 0.1;\n      var iStyle = \"width: \".concat(this.options.icon.dimensions.width.size + this.options.icon.dimensions.width.units, \"\\n            ;height: \").concat(this.options.icon.dimensions.height.size + this.options.icon.dimensions.height.units, \"\\n            ;font-size: \").concat(fontSize + this.options.icon.dimensions.width.units, \"\\n            ;line-height: \").concat(lineHeight + this.options.icon.dimensions.width.units, \"\\n            ;text-indent: \").concat(textIndent + this.options.icon.dimensions.width.units, \"\\n            ;background-color: \").concat(!this.options.icon.useEmojis ? this.options.icon.backgroundColor : 'transparent', \";color: \").concat(this.options.icon.color);\n      for (var i in this.options.icon.position) {\n        var pos = this.options.icon.position;\n        pos = pos[i];\n        iStyle += ';' + i + ':' + pos.size + pos.units;\n      }\n      iStyle += \";z-index: \".concat(this.options.icon.zIndex);\n      var className = \"_access-icon \".concat(this.options.icon.fontClass, \" _access\") + (this.options.icon.circular ? ' circular' : '');\n      var iconElem = this._common.jsonToHtml({\n        type: 'i',\n        attrs: {\n          'class': className,\n          'style': iStyle,\n          'title': this.options.labels.menuTitle,\n          'tabIndex': 0\n        },\n        children: [{\n          type: '#text',\n          text: this.options.icon.img\n        }]\n      });\n      this._body.appendChild(iconElem);\n      this._common.deployedObjects.set('._access-icon', false);\n      return iconElem;\n    }\n  }, {\n    key: \"parseKeys\",\n    value: function parseKeys(arr) {\n      return this.options.hotkeys.enabled ? this.options.hotkeys.helpTitles ? 'Hotkey: ' + arr.map(function (val) {\n        return Number.isInteger(val) ? String.fromCharCode(val).toLowerCase() : val.replace('Key', '');\n      }).join('+') : '' : '';\n    }\n  }, {\n    key: \"injectMenu\",\n    value: function injectMenu() {\n      var _this2 = this;\n      var json = {\n        type: 'div',\n        attrs: {\n          'class': '_access-menu close _access'\n        },\n        children: [{\n          type: 'p',\n          attrs: {\n            'class': '_text-center',\n            'role': 'presentation'\n          },\n          children: [{\n            type: 'button',\n            attrs: {\n              'class': \"_menu-close-btn _menu-btn \".concat(this.options.icon.fontClass),\n              'title': this.options.labels.closeTitle\n            },\n            children: [{\n              type: '#text',\n              text: \"\".concat(!this.options.icon.useEmojis ? 'close' : 'X')\n            }]\n          }, {\n            type: '#text',\n            text: this.options.labels.menuTitle\n          }, {\n            type: 'button',\n            attrs: {\n              'class': \"_menu-reset-btn _menu-btn \".concat(this.options.icon.fontClass),\n              'title': this.options.labels.resetTitle\n            },\n            children: [{\n              type: '#text',\n              text: \"\".concat(!this.options.icon.useEmojis ? 'refresh' : '♲')\n            }]\n          }]\n        }, {\n          type: 'ul',\n          attrs: {\n            'class': this.options.animations.buttons ? 'before-collapse _access-scrollbar' : '_access-scrollbar'\n          },\n          children: [{\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'increaseText',\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.increaseText\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'decreaseText',\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.decreaseText\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'increaseTextSpacing',\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.increaseTextSpacing\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'decreaseTextSpacing',\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.decreaseTextSpacing\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'increaseLineHeight',\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.increaseLineHeight\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'decreaseLineHeight',\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.decreaseLineHeight\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'invertColors',\n                'title': this.parseKeys(this.options.hotkeys.keys.invertColors),\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.invertColors\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'grayHues',\n                'title': this.parseKeys(this.options.hotkeys.keys.grayHues),\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.grayHues\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'underlineLinks',\n                'title': this.parseKeys(this.options.hotkeys.keys.underlineLinks),\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.underlineLinks\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'bigCursor',\n                'title': this.parseKeys(this.options.hotkeys.keys.bigCursor),\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: 'div',\n                attrs: {\n                  'id': 'iconBigCursor'\n                }\n              }, {\n                type: '#text',\n                text: this.options.labels.bigCursor\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'readingGuide',\n                'title': this.parseKeys(this.options.hotkeys.keys.readingGuide),\n                'tabIndex': '-1'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.readingGuide\n              }]\n            }]\n          }, {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'disableAnimations'\n              },\n              children: [{\n                type: '#text',\n                text: this.options.labels.disableAnimations\n              }]\n            }]\n          }]\n        }]\n      };\n      if (this.options.iframeModals) {\n        this.options.iframeModals.forEach(function (im, i) {\n          var btn = {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'iframeModals',\n                'data-access-url': im.iframeUrl\n              },\n              children: [{\n                type: '#text',\n                text: im.buttonText\n              }]\n            }]\n          };\n          var icon = null;\n          if (im.icon && !_this2.options.icon.useEmojis) icon = im.icon;else if (im.emoji && _this2.options.icon.useEmojis) icon = im.emoji;\n          if (icon) {\n            btn.children[0].attrs['data-access-iframe-index'] = i;\n            var css = \"._access-menu ul li button[data-access-action=\\\"iframeModals\\\"][data-access-iframe-index=\\\"\".concat(i, \"\\\"]:before {\\n                        content: \\\"\").concat(icon, \"\\\";\\n                    }\");\n            var className = '_data-access-iframe-index-' + i;\n            _this2._common.injectStyle(css, {\n              className: className\n            });\n            _this2._common.deployedObjects.set('.' + className, false);\n          }\n          if (_this2.options.modules.textToSpeech) json.children[1].children.splice(json.children[1].children.length - 2, 0, btn);else json.children[1].children.push(btn);\n        });\n      }\n      if (this.options.customFunctions) {\n        this.options.customFunctions.forEach(function (cf, i) {\n          var btn = {\n            type: 'li',\n            children: [{\n              type: 'button',\n              attrs: {\n                'data-access-action': 'customFunctions',\n                'data-access-custom-id': cf.id,\n                'data-access-custom-index': i\n              },\n              children: [{\n                type: '#text',\n                text: cf.buttonText\n              }]\n            }]\n          };\n          var icon = null;\n          if (cf.icon && !_this2.options.icon.useEmojis) icon = cf.icon;else if (cf.emoji && _this2.options.icon.useEmojis) icon = cf.emoji;\n          if (icon) {\n            var css = \"._access-menu ul li button[data-access-action=\\\"customFunctions\\\"][data-access-custom-id=\\\"\".concat(cf.id, \"\\\"]:before {\\n                        content: \\\"\").concat(icon, \"\\\";\\n                    }\");\n            var className = '_data-access-custom-id-' + cf.id;\n            _this2._common.injectStyle(css, {\n              className: className\n            });\n            _this2._common.deployedObjects.set('.' + className, false);\n          }\n          if (_this2.options.modules.textToSpeech) json.children[1].children.splice(json.children[1].children.length - 2, 0, btn);else json.children[1].children.push(btn);\n        });\n      }\n      var menuElem = this._common.jsonToHtml(json);\n      for (var i in this.options.icon.position) {\n        menuElem.classList.add(i);\n      }\n      this._body.appendChild(menuElem);\n      setTimeout(function () {\n        var ic = document.getElementById('iconBigCursor');\n        if (ic) {\n          ic.outerHTML = ic.outerHTML + '<svg version=\"1.1\" id=\"iconBigCursorSvg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style=\"position: absolute;width: 19px;height: 19px;left: 17px;top: 9px; left: 9px;enable-background:new 0 0 512 512;\" xml:space=\"preserve\"><path d=\"M 423.547 323.115 l -320 -320 c -3.051 -3.051 -7.637 -3.947 -11.627 -2.304 s -6.592 5.547 -6.592 9.856 V 480 c 0 4.501 2.837 8.533 7.083 10.048 c 4.224 1.536 8.981 0.192 11.84 -3.285 l 85.205 -104.128 l 56.853 123.179 c 1.792 3.883 5.653 6.187 9.685 6.187 c 1.408 0 2.837 -0.277 4.203 -0.875 l 74.667 -32 c 2.645 -1.131 4.736 -3.285 5.76 -5.973 c 1.024 -2.688 0.939 -5.675 -0.277 -8.299 l -57.024 -123.52 h 132.672 c 4.309 0 8.213 -2.603 9.856 -6.592 C 427.515 330.752 426.598 326.187 423.547 323.115 Z\"/></svg>';\n          document.getElementById('iconBigCursor').remove();\n        }\n      }, 1);\n      this._common.deployedObjects.set('._access-menu', false);\n      var closeBtn = document.querySelector('._access-menu ._menu-close-btn');\n      ['click', 'keyup'].forEach(function (evt) {\n        closeBtn.addEventListener(evt, function (e) {\n          var et = e || window.event;\n          if (et.detail === 0 && et.key !== 'Enter') return;\n          _this2.toggleMenu();\n        }, false);\n      });\n      var resetBtn = document.querySelector('._access-menu ._menu-reset-btn');\n      ['click', 'keyup'].forEach(function (evt) {\n        resetBtn.addEventListener(evt, function (e) {\n          var et = e || window.event;\n          if (et.detail === 0 && et.key !== 'Enter') return;\n          _this2.resetAll();\n        }, false);\n      });\n      return menuElem;\n    }\n  }, {\n    key: \"getVoices\",\n    value: function getVoices() {\n      return new Promise(function (resolve) {\n        var synth = window.speechSynthesis;\n        var id;\n        id = setInterval(function () {\n          if (synth.getVoices().length !== 0) {\n            resolve(synth.getVoices());\n            clearInterval(id);\n          }\n        }, 10);\n      });\n    }\n  }, {\n    key: \"injectTts\",\n    value: function () {\n      var _injectTts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var voices, isLngSupported, i, tts, sts, ul;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getVoices();\n              case 2:\n                voices = _context.sent;\n                isLngSupported = false;\n                i = 0;\n              case 5:\n                if (!(i < voices.length)) {\n                  _context.next = 12;\n                  break;\n                }\n                if (!(voices[i].lang === this.options.language.textToSpeechLang)) {\n                  _context.next = 9;\n                  break;\n                }\n                isLngSupported = true;\n                return _context.abrupt(\"break\", 12);\n              case 9:\n                i++;\n                _context.next = 5;\n                break;\n              case 12:\n                if (isLngSupported) {\n                  tts = this.common.jsonToHtml({\n                    type: 'li',\n                    children: [{\n                      type: 'button',\n                      attrs: {\n                        'data-access-action': 'textToSpeech'\n                      },\n                      children: [{\n                        type: '#text',\n                        text: this.options.labels.textToSpeech\n                      }]\n                    }, {\n                      type: 'div',\n                      attrs: {\n                        'class': 'screen-reader-wrapper'\n                      },\n                      children: [{\n                        type: 'div',\n                        attrs: {\n                          'class': 'screen-reader-wrapper-step-1',\n                          'tabIndex': '-1'\n                        }\n                      }, {\n                        type: 'div',\n                        attrs: {\n                          'class': 'screen-reader-wrapper-step-2',\n                          'tabIndex': '-1'\n                        }\n                      }, {\n                        type: 'div',\n                        attrs: {\n                          'class': 'screen-reader-wrapper-step-3',\n                          'tabIndex': '-1'\n                        }\n                      }]\n                    }]\n                  });\n                  sts = this.common.jsonToHtml({\n                    type: 'li',\n                    children: [{\n                      type: 'button',\n                      attrs: {\n                        'data-access-action': 'speechToText'\n                      },\n                      children: [{\n                        type: '#text',\n                        text: this.options.labels.speechToText\n                      }]\n                    }]\n                  });\n                  ul = document.querySelector('._access-menu ul');\n                  ul.appendChild(sts);\n                  ul.appendChild(tts);\n                }\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function injectTts() {\n        return _injectTts.apply(this, arguments);\n      }\n      return injectTts;\n    }()\n  }, {\n    key: \"addListeners\",\n    value: function addListeners() {\n      var _this3 = this;\n      var lis = document.querySelectorAll('._access-menu ul li');\n      var step1 = document.getElementsByClassName('screen-reader-wrapper-step-1');\n      var step2 = document.getElementsByClassName('screen-reader-wrapper-step-2');\n      var step3 = document.getElementsByClassName('screen-reader-wrapper-step-3');\n      var _loop = function _loop(i) {\n        ['click', 'keyup'].forEach(function (evt) {\n          return lis[i].addEventListener(evt, function (e) {\n            var evt = e || window.event;\n            if (evt.detail === 0 && evt.key !== 'Enter') return;\n            _this3.invoke(evt.target.getAttribute('data-access-action'), evt.target);\n          });\n        });\n      };\n      for (var i = 0; i < lis.length; i++) {\n        _loop(i);\n      }\n      [].concat(_toConsumableArray(Array.from(step1)), _toConsumableArray(Array.from(step2)), _toConsumableArray(Array.from(step3))).forEach(function (el) {\n        return el.addEventListener('click', function (e) {\n          var evt = e || window.event;\n          _this3.invoke(evt.target.parentElement.parentElement.getAttribute('data-access-action'), evt.target);\n        }, false);\n      });\n    }\n  }, {\n    key: \"disableUnsupportedModules\",\n    value: function disableUnsupportedModules() {\n      for (var i in this.options.modules) {\n        var m = this.options.modules;\n        m = m[i];\n        if (!m) {\n          var moduleLi = document.querySelector('li[data-access-action=\"' + i + '\"]');\n          if (moduleLi) {\n            moduleLi.classList.add('not-supported');\n          }\n        }\n      }\n    }\n  }, {\n    key: \"resetAll\",\n    value: function resetAll() {\n      this.menuInterface.textToSpeech(true);\n      this.menuInterface.speechToText(true);\n      this.menuInterface.disableAnimations(true);\n      this.menuInterface.underlineLinks(true);\n      this.menuInterface.grayHues(true);\n      this.menuInterface.invertColors(true);\n      this.menuInterface.bigCursor(true);\n      this.menuInterface.readingGuide(true);\n      this.resetTextSize();\n      this.resetTextSpace();\n      this.resetLineHeight();\n    }\n  }, {\n    key: \"resetTextSize\",\n    value: function resetTextSize() {\n      this.resetIfDefined(this._stateValues.body.fontSize, this._body.style, 'fontSize');\n      if (typeof this._htmlOrgFontSize !== 'undefined') this._html.style.fontSize = this._htmlOrgFontSize;\n      var all = document.querySelectorAll('[data-init-font-size]');\n      for (var i = 0; i < all.length; i++) {\n        all[i].style.fontSize = all[i].getAttribute('data-init-font-size');\n        all[i].removeAttribute('data-init-font-size');\n      }\n      this._sessionState.textSize = 0;\n      this.onChange(true);\n    }\n  }, {\n    key: \"resetLineHeight\",\n    value: function resetLineHeight() {\n      this.resetIfDefined(this._stateValues.body.lineHeight, this.body.style, 'lineHeight');\n      var all = document.querySelectorAll('[data-init-line-height]');\n      for (var i = 0; i < all.length; i++) {\n        all[i].style.lineHeight = all[i].getAttribute('data-init-line-height');\n        all[i].removeAttribute('data-init-line-height');\n      }\n      this.sessionState.lineHeight = 0;\n      this.onChange(true);\n    }\n  }, {\n    key: \"resetTextSpace\",\n    value: function resetTextSpace() {\n      this.resetIfDefined(this._stateValues.body.wordSpacing, this._body.style, 'wordSpacing');\n      this.resetIfDefined(this._stateValues.body.letterSpacing, this._body.style, 'letterSpacing');\n      var all = document.querySelectorAll('[data-init-word-spacing]');\n      var all2 = document.querySelectorAll('[data-init-letter-spacing]');\n      for (var i = 0; i < all.length; i++) {\n        all[i].style.wordSpacing = all[i].getAttribute('data-init-word-spacing');\n        all[i].removeAttribute('data-init-word-spacing');\n      }\n      for (var _i = 0; _i < all2.length; _i++) {\n        all[_i].style.letterSpacing = all[_i].getAttribute('data-init-letter-spacing');\n        all[_i].removeAttribute('data-init-letter-spacing');\n      }\n      this._sessionState.textSpace = 0;\n      this.onChange(true);\n    }\n  }, {\n    key: \"alterTextSize\",\n    value: function alterTextSize(isIncrease) {\n      this._sessionState.textSize += isIncrease ? 1 : -1;\n      this.onChange(true);\n      var factor = 12.5;\n      if (!isIncrease) factor *= -1;\n      if (this.options.textPixelMode) {\n        var all = document.querySelectorAll('*:not(._access)');\n        for (var i = 0; i < all.length; i++) {\n          var fSize = getComputedStyle(all[i]).fontSize;\n          if (fSize && fSize.indexOf('px') > -1) {\n            if (!all[i].getAttribute('data-init-font-size')) all[i].setAttribute('data-init-font-size', fSize);\n            fSize = parseInt(fSize.replace('px', '')) + factor;\n            all[i].style.fontSize = fSize + 'px';\n          }\n          if (this._stateValues.textToSpeech) this.textToSpeech(\"Text Size \".concat(isIncrease ? 'Increased' : 'Decreased'));\n        }\n      } else if (this.options.textEmlMode) {\n        var fp = this._html.style.fontSize;\n        if (fp.indexOf('%')) {\n          fp = parseInt(fp.replace('%', ''));\n          this._html.style.fontSize = fp + factor + '%';\n          if (this._stateValues.textToSpeech) this.textToSpeech(\"Text Size \".concat(isIncrease ? 'Increased' : 'Decreased'));\n        } else {\n          this._common.warn('Accessibility.textEmlMode, html element is not set in %.');\n        }\n      } else {\n        var _fSize = this._common.getFormattedDim(getComputedStyle(this._body).fontSize);\n        if (typeof this._stateValues.body.fontSize === 'undefined') this._stateValues.body.fontSize = _fSize.size + _fSize.suffix;\n        if (_fSize && _fSize.suffix && !isNaN(_fSize.size * 1)) {\n          this._body.style.fontSize = _fSize.size * 1 + factor + _fSize.suffix;\n        }\n      }\n    }\n  }, {\n    key: \"alterLineHeight\",\n    value: function alterLineHeight(isIncrease) {\n      this.sessionState.lineHeight += isIncrease ? 1 : -1;\n      this.onChange(true);\n      var factor = 2;\n      if (!isIncrease) factor *= -1;\n      var all = document.querySelectorAll('*:not(._access)');\n      var exclude = Array.prototype.slice.call(document.querySelectorAll('._access-menu *'));\n      for (var i = 0; i < all.length; i++) {\n        if (exclude.includes(all[i])) {\n          continue;\n        }\n        if (this.options.textPixelMode) {\n          var lHeight = getComputedStyle(all[i]).lineHeight;\n          if (lHeight && lHeight.indexOf('px') > -1) {\n            if (!all[i].getAttribute('data-init-line-height')) all[i].setAttribute('data-init-line-height', lHeight);\n            var newPixel = parseInt(lHeight.replace('px', '')) + factor;\n            all[i].style.lineHeight = \"\".concat(newPixel, \"px\");\n          }\n          if (this._stateValues.textToSpeech) this.textToSpeech(\"Line Height \".concat(isIncrease ? 'Increased' : 'Decreased'));\n        } else if (this.options.textEmlMode) {\n          var lTextSize = getComputedStyle(all[i]).fontSize;\n          var _lHeight = getComputedStyle(all[i]).lineHeight;\n          var lHeight2 = _lHeight.replace('px', '');\n          var lTextSize2 = lTextSize.replace('px', '');\n          var inPercent = parseInt(lHeight2) * 100 / parseInt(lTextSize2);\n          if (_lHeight && _lHeight.indexOf('px') > -1) {\n            if (!all[i].getAttribute('data-init-line-height')) all[i].setAttribute('data-init-line-height', inPercent + '%');\n            inPercent += factor;\n            all[i].style.lineHeight = inPercent + '%';\n          }\n          if (this._stateValues.textToSpeech) this.textToSpeech(\"Line height \".concat(isIncrease ? 'Increased' : 'Decreased'));\n        }\n      }\n    }\n  }, {\n    key: \"alterTextSpace\",\n    value: function alterTextSpace(isIncrease) {\n      this._sessionState.textSpace += isIncrease ? 1 : -1;\n      this.onChange(true);\n      var factor = 2;\n      if (!isIncrease) factor *= -1;\n      if (this.options.textPixelMode) {\n        var all = document.querySelectorAll('*:not(._access)');\n        var exclude = Array.prototype.slice.call(document.querySelectorAll('._access-menu *'));\n        for (var i = 0; i < all.length; i++) {\n          if (exclude.includes(all[i])) {\n            continue;\n          } // wordSpacing\n\n          var fSpacing = all[i].style.wordSpacing;\n          if (fSpacing && fSpacing.indexOf('px') > -1) {\n            if (!all[i].getAttribute('data-init-word-spacing')) all[i].setAttribute('data-init-word-spacing', fSpacing);\n            fSpacing = fSpacing.replace('px', '') * 1 + factor;\n            all[i].style.wordSpacing = fSpacing + 'px';\n          } else {\n            all[i].setAttribute('data-init-word-spacing', fSpacing);\n            all[i].style.wordSpacing = factor + 'px';\n          } // letterSpacing\n\n          var fSpacing2 = all[i].style.letterSpacing;\n          if (fSpacing2 && fSpacing2.indexOf('px') > -1) {\n            if (!all[i].getAttribute('data-init-letter-spacing')) all[i].setAttribute('data-init-letter-spacing', fSpacing2);\n            fSpacing2 = fSpacing2.replace('px', '') * 1 + factor;\n            all[i].style.letterSpacing = fSpacing2 + 'px';\n          } else {\n            all[i].setAttribute('data-init-letter-spacing', fSpacing2);\n            all[i].style.letterSpacing = factor + 'px';\n          }\n        }\n        if (this._stateValues.textToSpeech) this.textToSpeech(\"Text Spacing \".concat(isIncrease ? 'Increased' : 'Decreased'));\n      } else {\n        // wordSpacing\n        var _fSpacing = this._common.getFormattedDim(getComputedStyle(this._body).wordSpacing);\n        if (typeof this._stateValues.body.wordSpacing === 'undefined') this._stateValues.body.wordSpacing = '';\n        if (_fSpacing && _fSpacing.suffix && !isNaN(_fSpacing.size * 1)) {\n          this._body.style.wordSpacing = _fSpacing.size * 1 + factor + _fSpacing.suffix;\n        } // letterSpacing\n\n        var _fSpacing2 = this._common.getFormattedDim(getComputedStyle(this._body).letterSpacing);\n        if (typeof this._stateValues.body.letterSpacing === 'undefined') this._stateValues.body.letterSpacing = '';\n        if (_fSpacing2 && _fSpacing2.sufix && !isNaN(_fSpacing2.size * 1)) {\n          this._body.style.letterSpacing = _fSpacing2.size * 1 + factor + _fSpacing2.sufix;\n        }\n        if (this._stateValues.textToSpeech) this.textToSpeech(\"Text Spacing \".concat(isIncrease ? 'Increased' : 'Decreased'));\n      }\n    }\n  }, {\n    key: \"speechToText\",\n    value: function speechToText() {\n      var _this4 = this;\n      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n        this._recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n        this._recognition.continuous = true;\n        this._recognition.interimResults = true;\n        this._recognition.onstart = function () {\n          // TODO red color on mic icon\n          // console.log('listening . . .');\n          // if (this.speechToTextTarget)\n          //     this.speechToTextTarget.parentElement.classList.add('_access-listening');\n          _this4._body.classList.add('_access-listening');\n        };\n        this._recognition.onend = function () {\n          _this4._body.classList.remove('_access-listening');\n        };\n        this._recognition.onresult = function (event) {\n          var finalTranscript = '';\n          if (typeof event.results === 'undefined') {\n            return;\n          }\n          for (var i = event.resultIndex; i < event.results.length; ++i) {\n            if (event.results[i].isFinal) {\n              finalTranscript += event.results[i][0].transcript;\n            }\n          }\n          if (finalTranscript && _this4._speechToTextTarget) {\n            _this4._speechToTextTarget.parentElement.classList.remove('_access-listening');\n            if (_this4._speechToTextTarget.tagName.toLowerCase() === 'input' || _this4._speechToTextTarget.tagName.toLowerCase() === 'textarea') {\n              _this4._speechToTextTarget.value = finalTranscript;\n            } else if (_this4._speechToTextTarget.getAttribute('contenteditable') !== null) {\n              _this4._speechToTextTarget.innerText = finalTranscript;\n            }\n          }\n        };\n        this._recognition.lang = this.options.language.speechToTextLang;\n        this._recognition.start();\n      }\n    }\n  }, {\n    key: \"textToSpeech\",\n    value: function textToSpeech(text) {\n      var _this5 = this;\n      var windowAny = window;\n      if (!windowAny.SpeechSynthesisUtterance || !windowAny.speechSynthesis) return;\n      var msg = new windowAny.SpeechSynthesisUtterance(text);\n      msg.lang = this.options.language.textToSpeechLang;\n      msg.lang = this.options.textToSpeechLang;\n      msg.rate = this._stateValues.speechRate;\n      msg.onend = function () {\n        _this5._isReading = false;\n      };\n      var voices = windowAny.speechSynthesis.getVoices();\n      var isLngSupported = false;\n      for (var i = 0; i < voices.length; i++) {\n        if (voices[i].lang === msg.lang) {\n          msg.voice = voices[i];\n          isLngSupported = true;\n          break;\n        }\n      }\n      if (!isLngSupported) {\n        this._common.warn('text to speech language not supported!');\n      }\n      if (window.speechSynthesis.pending || window.speechSynthesis.speaking) {\n        window.speechSynthesis.pause;\n        window.speechSynthesis.cancel();\n      }\n      window.speechSynthesis.speak(msg);\n      this._isReading = true;\n    }\n  }, {\n    key: \"createScreenShot\",\n    value: function createScreenShot(url) {\n      return new Promise(function (resolve) {\n        var canvas = document.createElement('canvas');\n        var img = new Image();\n        canvas.style.position = 'fixed';\n        canvas.style.top = '0';\n        canvas.style.left = '0';\n        canvas.style.opacity = '0';\n        canvas.style.transform = 'scale(0.05)';\n        img.crossOrigin = 'anonymous';\n        img.onload = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          var ctx, res;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  document.body.appendChild(canvas);\n                  ctx = canvas.getContext('2d');\n                  canvas.width = img.naturalWidth;\n                  canvas.height = img.naturalHeight;\n                  ctx.clearRect(0, 0, canvas.width, canvas.height);\n                  ctx.drawImage(img, 0, 0);\n                  try {\n                    res = canvas.toDataURL('image/png');\n                  } catch (e) {}\n                  resolve(res);\n                  canvas.remove();\n                case 9:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n        img.onerror = function () {\n          resolve(_common.Common.DEFAULT_PIXEL);\n        };\n        img.src = url;\n      });\n    }\n  }, {\n    key: \"listen\",\n    value: function listen() {\n      if (_typeof(this._recognition) === 'object' && typeof this._recognition.stop === 'function') this._recognition.stop();\n      this._speechToTextTarget = window.event.target;\n      this.speechToText();\n    }\n  }, {\n    key: \"read\",\n    value: function read(e) {\n      try {\n        e = window.event || e || arguments[0];\n        if (e && e.preventDefault) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      } catch (ex) {}\n      var allContent = Array.prototype.slice.call(document.querySelectorAll('._access-menu *'));\n      for (var key in allContent) {\n        if (allContent[key] === window.event.target && e instanceof MouseEvent) return;\n      }\n      if (e instanceof KeyboardEvent && (e.shiftKey && e.key === 'Tab' || e.key === 'Tab')) {\n        this.textToSpeech(window.event.target.innerText);\n        return;\n      }\n      if (this._isReading) {\n        window.speechSynthesis.cancel();\n        this._isReading = false;\n      } else this.textToSpeech(window.event.target.innerText);\n    }\n  }, {\n    key: \"runHotkey\",\n    value: function runHotkey(name) {\n      switch (name) {\n        case 'toggleMenu':\n          this.toggleMenu();\n          break;\n        default:\n          if (this.menuInterface.hasOwnProperty(name)) {\n            if (this._options.modules[name]) {\n              this.menuInterface[name](false);\n            }\n          }\n          break;\n      }\n    }\n  }, {\n    key: \"toggleMenu\",\n    value: function toggleMenu() {\n      var _this6 = this;\n      var shouldClose = this._menu.classList.contains('close');\n      if (this.options.animations && this.options.animations.buttons) {\n        setTimeout(function () {\n          _this6._menu.querySelector('ul').classList.toggle('before-collapse');\n        }, shouldClose ? 500 : 10);\n      }\n      this._menu.classList.toggle('close');\n      this.options.icon.tabIndex = shouldClose ? 0 : -1;\n      this._menu.childNodes.forEach(function (child) {\n        child.tabIndex = 0;\n        if (child.hasChildNodes()) {\n          child.tabIndex = -1;\n          child.childNodes.forEach(function (li) {\n            li.tabIndex = shouldClose ? 0 : -1;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"invoke\",\n    value: function invoke(action, button) {\n      if (typeof this.menuInterface[action] === 'function') this.menuInterface[action](undefined, button);\n    }\n  }, {\n    key: \"build\",\n    value: function build() {\n      var _this7 = this;\n      this._stateValues = {\n        underlineLinks: false,\n        textToSpeech: false,\n        bigCursor: false,\n        readingGuide: false,\n        speechRate: 1,\n        body: {},\n        html: {}\n      };\n      this._body = document.body || document.getElementsByTagName('body')[0];\n      this._html = document.documentElement || document.getElementsByTagName('html')[0];\n      if (this.options.textEmlMode) this.initFontSize();\n      this.injectCss();\n      this._icon = this.injectIcon();\n      this._menu = this.injectMenu();\n      this.injectTts();\n      setTimeout(function () {\n        _this7.addListeners();\n        _this7.disableUnsupportedModules();\n      }, 10);\n      if (this.options.hotkeys.enabled) {\n        document.onkeydown = function (e) {\n          var act = Object.entries(_this7.options.hotkeys.keys).find(function (val) {\n            var pass = true;\n            for (var i = 0; i < val[1].length; i++) {\n              if (Number.isInteger(val[1][i])) {\n                if (e.keyCode !== val[1][i]) {\n                  pass = false;\n                }\n              } else {\n                if (e[val[1][i]] === undefined || e[val[1][i]] === false) {\n                  pass = false;\n                }\n              }\n            }\n            return pass;\n          });\n          if (act !== undefined) {\n            _this7.runHotkey(act[0]);\n          }\n        };\n      }\n      this._icon.addEventListener('click', function () {\n        _this7.toggleMenu();\n      }, false);\n      this._icon.addEventListener('keyup', function (event) {\n        if (event.key === 'Enter') {\n          _this7.toggleMenu();\n        }\n      }, false);\n      setTimeout(function () {\n        _this7._icon.style.opacity = '1';\n      }, 10);\n      this.updateReadGuide = function (e) {\n        var newPos = 0;\n        if (e.type === 'touchmove') {\n          newPos = e.changedTouches[0].clientY;\n        } else {\n          newPos = e.y;\n        }\n        document.getElementById('access_read_guide_bar').style.top = newPos - (parseInt(_this7.options.guide.height.replace('px', '')) + 5) + 'px';\n      };\n      this.menuInterface = new _menuInterface.MenuInterface(this);\n      if (this.options.session.persistent) this.setSessionFromCache();\n    }\n  }, {\n    key: \"updateReadGuide\",\n    value: function updateReadGuide(e) {\n      var newPos = 0;\n      if (e.type === 'touchmove') {\n        newPos = e.changedTouches[0].clientY;\n      } else {\n        newPos = e.y;\n      }\n      document.getElementById('access_read_guide_bar').style.top = newPos - (parseInt(this.options.guide.height.replace('px', '')) + 5) + 'px';\n    }\n  }, {\n    key: \"resetIfDefined\",\n    value: function resetIfDefined(src, dest, prop) {\n      if (typeof src !== 'undefined') dest[prop] = src;\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(updateSession) {\n      if (updateSession && this.options.session.persistent) this.saveSession();\n    }\n  }, {\n    key: \"saveSession\",\n    value: function saveSession() {\n      this._storage.set('_accessState', this.sessionState);\n    }\n  }, {\n    key: \"setSessionFromCache\",\n    value: function setSessionFromCache() {\n      var sessionState = this._storage.get('_accessState');\n      if (sessionState) {\n        if (sessionState.textSize) {\n          var textSize = sessionState.textSize;\n          if (textSize > 0) {\n            while (textSize--) {\n              this.alterTextSize(true);\n            }\n          } else {\n            while (textSize++) {\n              this.alterTextSize(false);\n            }\n          }\n        }\n        if (sessionState.textSpace) {\n          var textSpace = sessionState.textSpace;\n          if (textSpace > 0) {\n            while (textSpace--) {\n              this.alterTextSpace(true);\n            }\n          } else {\n            while (textSpace++) {\n              this.alterTextSpace(false);\n            }\n          }\n        }\n        if (sessionState.lineHeight) {\n          var lineHeight = sessionState.lineHeight;\n          if (lineHeight > 0) {\n            while (lineHeight--) {\n              this.alterLineHeight(true);\n            }\n          } else {\n            while (lineHeight--) {\n              this.alterLineHeight(false);\n            }\n          }\n        }\n        if (sessionState.invertColors) this.menuInterface.invertColors();\n        if (sessionState.grayHues) this.menuInterface.grayHues();\n        if (sessionState.underlineLinks) this.menuInterface.underlineLinks();\n        if (sessionState.bigCursor) this.menuInterface.bigCursor();\n        if (sessionState.readingGuide) this.menuInterface.readingGuide();\n        this.sessionState = sessionState;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var allSelectors = this._common.deployedObjects.getAll();\n      allSelectors.forEach(function (value, key) {\n        var elem = document.querySelector(key);\n        if (elem) elem.parentElement.removeChild(elem);\n      });\n    }\n  }]);\n  return Accessibility;\n}();\nexports.Accessibility = Accessibility;\nAccessibility.init = function (opt) {\n  console.warn('\"Accessibility.init()\" is deprecated! Please use \"new Accessibility()\" instead');\n  new Accessibility(opt);\n};\nvar _default = Accessibility;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}